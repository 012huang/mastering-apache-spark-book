== [[AstBuilder]] AstBuilder

`AstBuilder` is a ANTLR `AbstractParseTreeVisitor` (as `SqlBaseBaseVisitor`) that converts a SQL string into Spark SQL's corresponding entity (i.e. converts a ANTLR `ParseTree` to link:spark-sql-DataType.adoc[DataType], link:spark-sql-catalyst-Expression.adoc[Expression], link:spark-sql-LogicalPlan.adoc[LogicalPlan] or `TableIdentifier`) by means of <<visit-callbacks, visit callback methods>>.

`AstBuilder` uses https://github.com/apache/spark/blob/master/sql/catalyst/src/main/antlr4/org/apache/spark/sql/catalyst/parser/SqlBase.g4[SqlBase.g4] to describe the ANTLR grammar for Spark SQL.

[NOTE]
====
`SqlBaseBaseVisitor` is a ANTLR-specific base class that is auto-generated at build time from a ANTLR grammar in `SqlBase.g4`.

`SqlBaseBaseVisitor` is an ANTLR http://www.antlr.org/api/Java/org/antlr/v4/runtime/tree/AbstractParseTreeVisitor.html[AbstractParseTreeVisitor].
====

[[visit-callbacks]]
.AstBuilder's Visit Callback Methods (in alphabetical order)
[cols="1,3",options="header",width="100%"]
|===
| Callback Method
| What Created?

| [[visitFromClause]] `visitFromClause`
| link:spark-sql-LogicalPlan.adoc[LogicalPlan] for a `FROM` clause (as described by `fromClause` in `SqlBase.g4`)

| [[visitSingleDataType]] `visitSingleDataType`
| link:spark-sql-DataType.adoc[DataType]

| [[visitSingleExpression]] `visitSingleExpression`
| link:spark-sql-catalyst-Expression.adoc[Expression]

| [[visitSingleStatement]] `visitSingleStatement`
| `TableIdentifier`

| [[visitSingleTableIdentifier]] `visitSingleTableIdentifier`
| `TableIdentifier`
|===

[[with-methods]]
.AstBuilder's Parsing Helper Methods (in alphabetical order)
[cols="1,3",options="header",width="100%"]
|===
| Helper Method
| What Added to LogicalPlan?

| [[withAggregation]] `withAggregation`
|

| [[withGenerate]] `withGenerate`
| link:spark-sql-Generator.adoc[Generate] with link:spark-sql-Generator.adoc#UnresolvedGenerator[UnresolvedGenerator] and `join` enabled

| [[withHints]] `withHints`
| link:spark-sql-LogicalPlan-Hint.adoc[Hint]

| [[withJoinRelations]] `withJoinRelations`
|

| [[withQuerySpecification]] `withQuerySpecification`
|
|===

NOTE: `AstBuilder` belongs to `org.apache.spark.sql.catalyst.parser` package.

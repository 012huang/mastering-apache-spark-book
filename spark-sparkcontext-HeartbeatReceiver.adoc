== [[HeartbeatReceiver]] HeartbeatReceiver RPC Endpoint

`HeartbeatReceiver` link:spark-rpc.adoc[RPC endpoint] is a `ThreadSafeRpcEndpoint` and a link:spark-scheduler-listeners.adoc#SparkListener[SparkListener].

When created, it requires a `SparkContext` and a `Clock`. Later, it uses the `SparkContext` to <<addSparkListener, register itself as a `SparkListener`>>.

NOTE: `HeartbeatReceiver` RPC endpoint is registered while <<creating-instance, SparkContext is being created>>.

It uses RPC Environment (as `rpcEnv`), a TaskScheduler,

=== Internal Registries

* `executorLastSeen` - a registry of executor ids and the timestamps of when the last heartbeat was received.

=== Settings

* `spark.storage.blockManagerSlaveTimeoutMs` (default: `120s`)
* `spark.network.timeout` (default: `spark.storage.blockManagerSlaveTimeoutMs`)
* `spark.storage.blockManagerTimeoutIntervalMs` (default: `60s`)
* `spark.network.timeoutInterval` (default: `spark.storage.blockManagerTimeoutIntervalMs`)
